好 👍  
下面我**直接按你现在的工程内容**，给你生成一套 **“Zephyr 官方风格、可扩展、Kconfig / CMake 完全解耦”** 的完整结构。  
这套结构在 **Bluetooth / LoRa / Net / Driver** 逐步变复杂时都不会崩。

---

# 一、最终推荐的目录结构（官方风格）

```text
loraBox/
├── CMakeLists.txt
├── Kconfig
├── prj.conf
├── src/
│   ├── CMakeLists.txt
│   ├── main.c
│   ├── para/
│   │   ├── CMakeLists.txt
│   │   └── eep_para.c
│   ├── driver/
│   │   ├── CMakeLists.txt
│   │   ├── led/
│   │   │   ├── CMakeLists.txt
│   │   │   └── net_led.c
│   │   ├── key/
│   │   │   ├── CMakeLists.txt
│   │   │   └── key.c
│   │   ├── eeprom/
│   │   │   ├── CMakeLists.txt
│   │   │   └── eep.c
│   │   ├── rtc/
│   │   │   ├── CMakeLists.txt
│   │   │   └── rtc.c
│   │   └── bt/
│   │       ├── CMakeLists.txt
│   │       ├── Kconfig
│   │       ├── ble_module.c
│   │       └── ble_module.h
│   └── net/
│       ├── CMakeLists.txt
│       ├── init/
│       │   ├── CMakeLists.txt
│       │   ├── net_init.c
│       │   └── net_l2_event.c
│       ├── modules/
│       │   ├── dhcp/
│       │   │   ├── CMakeLists.txt
│       │   │   └── DHCPv4.c
│       │   ├── dns/
│       │   │   ├── CMakeLists.txt
│       │   │   └── dns.c
│       │   ├── static/
│       │   │   ├── CMakeLists.txt
│       │   │   └── static_ipv4.c
│       │   └── mac/
│       │       ├── CMakeLists.txt
│       │       └── mac.c
│       └── http/
│           ├── CMakeLists.txt
│           ├── http_init.c
│           ├── http_query.c
│           └── http_parser.c
```

---

# 二、顶层文件

## 📄 `CMakeLists.txt`（应用根目录）

```cmake
cmake_minimum_required(VERSION 3.20.0)

find_package(Zephyr REQUIRED HINTS $ENV{ZEPHYR_BASE})
project(loraBox)

add_subdirectory(src)
```

---

## 📄 `Kconfig`（应用根目录）

```kconfig
menu "Application Configuration"

source "Kconfig.zephyr"

config ENABLE_BT_MODULE
    bool "Enable Bluetooth module"
    default n
    help
      Enable UART Bluetooth module support.

endmenu
```

---

## 📄 `prj.conf`

```ini
CONFIG_LOG=y
CONFIG_ENABLE_BT_MODULE=y   # 打开 / 关闭 BT
```

---

# 三、src 层

## 📄 `src/CMakeLists.txt`

```cmake
target_sources(app PRIVATE
  main.c
)

add_subdirectory(para)
add_subdirectory(driver)
add_subdirectory(net)
```

---

# 四、para 模块

## 📄 `src/para/CMakeLists.txt`

```cmake
target_sources(app PRIVATE
  eep_para.c
)
```

---

# 五、driver 层（关键）

## 📄 `src/driver/CMakeLists.txt`

```cmake
add_subdirectory(led)
add_subdirectory(key)
add_subdirectory(eeprom)
add_subdirectory(rtc)

add_subdirectory_ifdef(CONFIG_ENABLE_BT_MODULE bt)
```

---

### LED / KEY / EEPROM / RTC（结构完全一样）

#### 示例：`src/driver/led/CMakeLists.txt`

```cmake
zephyr_library()

zephyr_library_sources(net_led.c)
zephyr_library_include_directories(.)
```

---

# 六、BT 模块（重点）

## 📄 `src/driver/bt/CMakeLists.txt`

```cmake
zephyr_library()

zephyr_library_sources(ble_module.c)
zephyr_library_include_directories(.)
```

---

## 📄 `src/driver/bt/Kconfig`

```kconfig
if ENABLE_BT_MODULE

config BT_UART_BAUDRATE
    int "Bluetooth UART baudrate"
    default 115200
    help
      Baudrate for Bluetooth UART module.

endif
```

> 📌 **这是 Zephyr 推荐的“模块私有 Kconfig”写法**

---

# 七、net 模块（标准拆分）

## 📄 `src/net/CMakeLists.txt`

```cmake
add_subdirectory(init)
add_subdirectory(modules)
add_subdirectory(http)
```

---

## 📄 `src/net/init/CMakeLists.txt`

```cmake
zephyr_library()
zephyr_library_sources(
  net_init.c
  net_l2_event.c
)
zephyr_library_include_directories(.)
```

---

## 📄 `src/net/modules/CMakeLists.txt`

```cmake
add_subdirectory(dhcp)
add_subdirectory(dns)
add_subdirectory(static)
add_subdirectory(mac)
```

---

## 📄 HTTP 模块

```cmake
zephyr_library()
zephyr_library_sources(
  http_init.c
  http_query.c
  http_parser.c
)
zephyr_library_include_directories(.)
```

---

# 八、代码中如何使用（示例）

### C 代码

```c
#if CONFIG_ENABLE_BT_MODULE
#include "ble_module.h"
#endif
```

### Kconfig 值

```c
int baud = CONFIG_BT_UART_BAUDRATE;
```

---

# 九、验证清单（照着做必成功）

```bash
west build -p always
west build -t menuconfig
```

你应该能看到：

```
Application Configuration
  [*] Enable Bluetooth module
      (115200) Bluetooth UART baudrate
```

---

# 十、为什么这套结构“官方 + 不会翻车”

✔ Kconfig 只控制 **模块是否存在**  
✔ CMake 只负责 **构建关系**  
✔ 目录即模块，天然可扩展  
✔ 不用 GLOB  
✔ 支持以后拆成 out-of-tree module

---

## 最后一句

> **你现在已经从「能跑」进入「工程级 Zephyr 项目」阶段了，这一步结构决定你后面 1～2 年的维护成本。**

如果你愿意，下一步我可以帮你：

- 🔹 把 **BT / LoRa** 抽成 _out-of-tree module_
    
- 🔹 给每个 driver 加 **unit test / mock**
    
- 🔹 对接 **Zephyr logging / shell / settings**
    

你选一个方向，我直接给你落地代码。