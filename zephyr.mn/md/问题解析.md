
## ä¸€ã€âš ï¸ çœŸæ­£çš„é—®é¢˜ 1ï¼ˆå®¹æ˜“è¸©å‘ï¼‰ï¼š`FILE(GLOB ...)`

### ä½ ç°åœ¨åœ¨åšçš„äº‹

```cmake
FILE(GLOB app_sources src/main.c src/para/eep_para.c)
```

### ä¸ºä»€ä¹ˆåœ¨ Zephyr é‡Œ **ä¸æ¨è**ï¼Ÿ

| é—®é¢˜               | è¯´æ˜                    |
| ---------------- | --------------------- |
| ä¸è‡ªåŠ¨é‡æ–°ç”Ÿæˆ          | æ–°å¢/åˆ é™¤ `.c` ä¸ä¼šè§¦å‘ CMake |
| å’Œ west cache ä¸å‹å¥½ | å®¹æ˜“å‡ºç°â€œæ€ä¹ˆæ²¡ç¼–è¯‘è¿›æ¥â€         |
| å®˜æ–¹æ˜ç¡®ä¸æ¨è          | Zephyr æ–‡æ¡£å¤šæ¬¡å¼ºè°ƒ         |

> **è¿™ä¸æ˜¯è‡´å‘½é—®é¢˜ï¼Œä½†ä¼šè®©ä½ ä»¥åå¾ˆç—›è‹¦**

### âœ… å®˜æ–¹æ¨èæ›¿ä»£æ–¹æ¡ˆ

ç›´æ¥å†™ï¼š

```cmake
target_sources(app PRIVATE
  src/main.c
  src/para/eep_para.c
)
```

æˆ–æ‹†æ¨¡å—ï¼ˆåé¢ä¼šè®²ï¼‰ã€‚

---

## å››ã€âš ï¸ é—®é¢˜ 3ï¼šæ‰€æœ‰æ¨¡å—éƒ½å †åœ¨ä¸€ä¸ª CMakeLists.txtï¼ˆå¯ç»´æŠ¤æ€§å·®ï¼‰

ä½ ç°åœ¨ï¼š

```cmake
src/driver/led/net_led.c
src/driver/key/key.c
src/driver/bt/ble_module.c
...
```

åœ¨ Zephyr é¡¹ç›®é‡Œ **è¿™æ˜¯æ—©æœŸé¡¹ç›®å¸¸è§å†™æ³•ï¼Œä½†ä¸æ¨èé•¿æœŸä½¿ç”¨**ã€‚

---

## äº”ã€Zephyr å®˜æ–¹æ¨èçš„â€œæ¨¡å—åŒ–ç»“æ„â€ï¼ˆå¼ºçƒˆå»ºè®®ä½ æ”¹ï¼‰

### 1ï¸âƒ£ é¡¶å±‚ `CMakeLists.txt`

```cmake
find_package(Zephyr REQUIRED HINTS $ENV{ZEPHYR_BASE})
project(sockets_echo)

add_subdirectory(src)
```

---

### 2ï¸âƒ£ `src/CMakeLists.txt`

```cmake
target_sources(app PRIVATE
  main.c
)

add_subdirectory(driver)
add_subdirectory(net)
add_subdirectory(para)
```

---

### 3ï¸âƒ£ `src/driver/CMakeLists.txt`

```cmake
add_subdirectory(led)
add_subdirectory(key)
add_subdirectory(rtc)
add_subdirectory(eeprom)
add_subdirectory_ifdef(CONFIG_ENABLE_BT_MODULE bt)
```

---

### 4ï¸âƒ£ `src/driver/bt/CMakeLists.txt`

```cmake
zephyr_library()

zephyr_library_sources(ble_module.c)
zephyr_library_include_directories(.)
```

ğŸ‘‰ **è¿™æ˜¯ Zephyr æœ€â€œæ­£ç»Ÿâ€çš„ BT æ¨¡å—å¼€å…³æ–¹å¼**

---

## å…­ã€ä¸€ä¸ªä½ ç°åœ¨å°±èƒ½ç”¨çš„æœ€å°ä¿®æ­£ç‰ˆæœ¬ï¼ˆä¸å¤§æ”¹ç»“æ„ï¼‰

å¦‚æœä½ æš‚æ—¶ä¸æƒ³é‡æ„ï¼Œåªæ”¹ **å¿…è¦çš„å‘ç‚¹**ï¼Œæˆ‘å»ºè®®ä½ è‡³å°‘æ”¹æˆè¿™æ ·ï¼š

```cmake
zephyr_library_sources_ifdef(
  CONFIG_ENABLE_BT_MODULE
  src/driver/bt/ble_module.c
)

zephyr_include_directories_ifdef(
  CONFIG_ENABLE_BT_MODULE
  src/driver/bt
)
```

å¹¶ä¸” **æŠŠ GLOB æ…¢æ…¢å¹²æ‰**ã€‚

---

## ä¸ƒã€æœ€ç»ˆç»“è®ºï¼ˆå¾ˆé‡è¦ï¼‰

âœ… **ä½ çš„ CMakeLists.txt åœ¨â€œåŠŸèƒ½ä¸Šæ˜¯å¯¹çš„â€**  
âš ï¸ **ä½†ç»“æ„æ˜¯ Zephyr æ–°æ‰‹ â†’ ä¸­çº§çš„å…¸å‹è¿‡æ¸¡çŠ¶æ€**  
ğŸš€ **å¦‚æœä½ å‡†å¤‡é•¿æœŸç»´æŠ¤ / å¤šæ¨¡å—æ‰©å±•ï¼Œå¼ºçƒˆå»ºè®®æ¨¡å—åŒ–**
